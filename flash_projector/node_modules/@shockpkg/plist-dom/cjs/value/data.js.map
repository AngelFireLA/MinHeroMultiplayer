{"version":3,"file":"data.js","names":["_options","require","_util","_value","ValueData","Value","TYPE","TAG_NAMES","constructor","value","Uint8Array","fromXmlElement","element","assertXmlTagName","text","xmlElementText","nodeValue","base64Decode","toXml","options","depth","n","newlineString","NEWLINE_STRING","c","dataColumns","DATA_COLUMNS","p","indentString","INDENT_STRING","repeat","r","s","base64Encode","slice","exports"],"sources":["../../src/value/data.ts"],"sourcesContent":["import {\n\tDATA_COLUMNS,\n\tINDENT_STRING,\n\tIToXmlOptions,\n\tNEWLINE_STRING\n} from '../options.ts';\nimport {\n\tIElement,\n\tassertXmlTagName,\n\tbase64Decode,\n\tbase64Encode,\n\txmlElementText\n} from '../util.ts';\nimport {Value} from '../value.ts';\n\n/**\n * ValueData object.\n */\nexport class ValueData extends Value {\n\t/**\n\t * Value type.\n\t */\n\tpublic static readonly TYPE = 'data';\n\n\t/**\n\t * Tag names.\n\t */\n\tpublic static readonly TAG_NAMES = ['data'];\n\n\t/**\n\t * Value value.\n\t */\n\tpublic value: Uint8Array;\n\n\t/**\n\t * ValueData constructor.\n\t *\n\t * @param value The value.\n\t */\n\tconstructor(value = new Uint8Array(0)) {\n\t\tsuper();\n\n\t\tthis.value = value;\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic fromXmlElement(element: Readonly<IElement>) {\n\t\tassertXmlTagName(element, 'data');\n\t\tconst text = xmlElementText(element)?.nodeValue || '';\n\t\tthis.value = base64Decode(text);\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic toXml(options: Readonly<IToXmlOptions> | null = null, depth = 0) {\n\t\tconst n = options?.newlineString ?? NEWLINE_STRING;\n\t\tconst c = options?.dataColumns ?? DATA_COLUMNS;\n\t\tconst p = (options?.indentString ?? INDENT_STRING).repeat(depth);\n\t\tlet r = `${p}<data>`;\n\t\tif (c > 0) {\n\t\t\tfor (let s = base64Encode(this.value); s; s = s.slice(c)) {\n\t\t\t\tr += `${n}${p}${s.slice(0, c)}`;\n\t\t\t}\n\t\t} else {\n\t\t\tr += `${n}${p}${base64Encode(this.value)}`;\n\t\t}\n\t\tr += `${n}${p}</data>`;\n\t\treturn r;\n\t}\n}\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAMA,IAAAC,KAAA,GAAAD,OAAA;AAOA,IAAAE,MAAA,GAAAF,OAAA;AAEA;AACA;AACA;AACO,MAAMG,SAAS,SAASC,YAAK,CAAC;EACpC;AACD;AACA;EACC,OAAuBC,IAAI,GAAG,MAAM;;EAEpC;AACD;AACA;EACC,OAAuBC,SAAS,GAAG,CAAC,MAAM,CAAC;;EAE3C;AACD;AACA;;EAGC;AACD;AACA;AACA;AACA;EACCC,WAAWA,CAACC,KAAK,GAAG,IAAIC,UAAU,CAAC,CAAC,CAAC,EAAE;IACtC,KAAK,CAAC,CAAC;IAEP,IAAI,CAACD,KAAK,GAAGA,KAAK;EACnB;;EAEA;AACD;AACA;EACQE,cAAcA,CAACC,OAA2B,EAAE;IAClD,IAAAC,sBAAgB,EAACD,OAAO,EAAE,MAAM,CAAC;IACjC,MAAME,IAAI,GAAG,IAAAC,oBAAc,EAACH,OAAO,CAAC,EAAEI,SAAS,IAAI,EAAE;IACrD,IAAI,CAACP,KAAK,GAAG,IAAAQ,kBAAY,EAACH,IAAI,CAAC;EAChC;;EAEA;AACD;AACA;EACQI,KAAKA,CAACC,OAAuC,GAAG,IAAI,EAAEC,KAAK,GAAG,CAAC,EAAE;IACvE,MAAMC,CAAC,GAAGF,OAAO,EAAEG,aAAa,IAAIC,uBAAc;IAClD,MAAMC,CAAC,GAAGL,OAAO,EAAEM,WAAW,IAAIC,qBAAY;IAC9C,MAAMC,CAAC,GAAG,CAACR,OAAO,EAAES,YAAY,IAAIC,sBAAa,EAAEC,MAAM,CAACV,KAAK,CAAC;IAChE,IAAIW,CAAC,GAAG,GAAGJ,CAAC,QAAQ;IACpB,IAAIH,CAAC,GAAG,CAAC,EAAE;MACV,KAAK,IAAIQ,CAAC,GAAG,IAAAC,kBAAY,EAAC,IAAI,CAACxB,KAAK,CAAC,EAAEuB,CAAC,EAAEA,CAAC,GAAGA,CAAC,CAACE,KAAK,CAACV,CAAC,CAAC,EAAE;QACzDO,CAAC,IAAI,GAAGV,CAAC,GAAGM,CAAC,GAAGK,CAAC,CAACE,KAAK,CAAC,CAAC,EAAEV,CAAC,CAAC,EAAE;MAChC;IACD,CAAC,MAAM;MACNO,CAAC,IAAI,GAAGV,CAAC,GAAGM,CAAC,GAAG,IAAAM,kBAAY,EAAC,IAAI,CAACxB,KAAK,CAAC,EAAE;IAC3C;IACAsB,CAAC,IAAI,GAAGV,CAAC,GAAGM,CAAC,SAAS;IACtB,OAAOI,CAAC;EACT;AACD;AAACI,OAAA,CAAA/B,SAAA,GAAAA,SAAA","ignoreList":[]}