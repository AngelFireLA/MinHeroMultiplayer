{"version":3,"file":"date.js","names":["_options","require","_util","_value","ValueDate","Value","TYPE","TAG_NAMES","value","Date","constructor","fromXmlElement","element","assertXmlTagName","text","xmlElementText","nodeValue","v","time","getTime","Error","toXml","options","depth","p","indentString","INDENT_STRING","repeat","d","toISOString","replace","exports"],"sources":["../../src/value/date.ts"],"sourcesContent":["import {INDENT_STRING, IToXmlOptions} from '../options.ts';\nimport {IElement, assertXmlTagName, xmlElementText} from '../util.ts';\nimport {Value} from '../value.ts';\n\n/**\n * ValueDate object.\n */\nexport class ValueDate extends Value {\n\t/**\n\t * Value type.\n\t */\n\tpublic static readonly TYPE = 'date';\n\n\t/**\n\t * Tag names.\n\t */\n\tpublic static readonly TAG_NAMES = ['date'];\n\n\t/**\n\t * Value value.\n\t */\n\tpublic value = new Date();\n\n\t/**\n\t * ValueDate constructor.\n\t *\n\t * @param value The value.\n\t */\n\tconstructor(value = new Date()) {\n\t\tsuper();\n\n\t\tthis.value = value;\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic fromXmlElement(element: Readonly<IElement>) {\n\t\tassertXmlTagName(element, 'date');\n\t\tconst text = xmlElementText(element)?.nodeValue || '';\n\t\tconst v = new Date(text);\n\t\tconst time = v.getTime();\n\t\tif (!time && time !== 0) {\n\t\t\tthrow new Error(`Invalid date data: ${text}`);\n\t\t}\n\t\tthis.value = v;\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic toXml(options: Readonly<IToXmlOptions> | null = null, depth = 0) {\n\t\tconst p = (options?.indentString ?? INDENT_STRING).repeat(depth);\n\t\tconst d = this.value.toISOString().replace(/\\.\\d+/, '');\n\t\treturn `${p}<date>${d}</date>`;\n\t}\n}\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAEA;AACA;AACA;AACO,MAAMG,SAAS,SAASC,YAAK,CAAC;EACpC;AACD;AACA;EACC,OAAuBC,IAAI,GAAG,MAAM;;EAEpC;AACD;AACA;EACC,OAAuBC,SAAS,GAAG,CAAC,MAAM,CAAC;;EAE3C;AACD;AACA;EACQC,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC;;EAEzB;AACD;AACA;AACA;AACA;EACCC,WAAWA,CAACF,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC,EAAE;IAC/B,KAAK,CAAC,CAAC;IAEP,IAAI,CAACD,KAAK,GAAGA,KAAK;EACnB;;EAEA;AACD;AACA;EACQG,cAAcA,CAACC,OAA2B,EAAE;IAClD,IAAAC,sBAAgB,EAACD,OAAO,EAAE,MAAM,CAAC;IACjC,MAAME,IAAI,GAAG,IAAAC,oBAAc,EAACH,OAAO,CAAC,EAAEI,SAAS,IAAI,EAAE;IACrD,MAAMC,CAAC,GAAG,IAAIR,IAAI,CAACK,IAAI,CAAC;IACxB,MAAMI,IAAI,GAAGD,CAAC,CAACE,OAAO,CAAC,CAAC;IACxB,IAAI,CAACD,IAAI,IAAIA,IAAI,KAAK,CAAC,EAAE;MACxB,MAAM,IAAIE,KAAK,CAAC,sBAAsBN,IAAI,EAAE,CAAC;IAC9C;IACA,IAAI,CAACN,KAAK,GAAGS,CAAC;EACf;;EAEA;AACD;AACA;EACQI,KAAKA,CAACC,OAAuC,GAAG,IAAI,EAAEC,KAAK,GAAG,CAAC,EAAE;IACvE,MAAMC,CAAC,GAAG,CAACF,OAAO,EAAEG,YAAY,IAAIC,sBAAa,EAAEC,MAAM,CAACJ,KAAK,CAAC;IAChE,MAAMK,CAAC,GAAG,IAAI,CAACpB,KAAK,CAACqB,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;IACvD,OAAO,GAAGN,CAAC,SAASI,CAAC,SAAS;EAC/B;AACD;AAACG,OAAA,CAAA3B,SAAA,GAAAA,SAAA","ignoreList":[]}